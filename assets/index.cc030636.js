import{r as s,R as a,e as v,a as A}from"./vendor.43c92bb8.js";const z=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(t){if(t.ep)return;t.ep=!0;const o=r(t);fetch(t.href,o)}};z();var B="/mozjpeg-on-browser/assets/logo.ecc203fb.svg";window.Buffer=buffer.Buffer;async function S(c){const e=document.createElement("img");e.src=c,await new Promise(t=>e.onload=t);const r=document.createElement("canvas");[r.width,r.height]=[e.width,e.height];const n=r.getContext("2d");if(n)return n.drawImage(e,0,0),n.getImageData(0,0,e.width,e.height)}async function x(c){const e=document.createElement("img");e.src=c,await new Promise(t=>e.onload=t);const r=document.createElement("canvas");[r.width,r.height]=[e.width,e.height];const n=r.getContext("2d");if(n)return n.drawImage(e,0,0),R(n.canvas.toDataURL("image/jpeg",.8))}function R(c){for(var e=atob(c.replace(/^.*,/,"")),r=new Uint8Array(e.length),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);try{var t=new Blob([r.buffer],{type:"image/png"})}catch{return!1}return t}const m=c=>Math.round(c/1024);function I(){const c=s.exports.useRef(null),e=s.exports.useRef(null),[r,n]=s.exports.useState(null),[t,o]=s.exports.useState(0),[i,E]=s.exports.useState(0),[w,y]=s.exports.useState(0),b=async()=>{var f;const u=((f=c.current)==null?void 0:f.files)||[];if(u[0]){o(m(u[0].size));const g=new FileReader;g.onload=async d=>{if(d.target){const l=await S(d.target.result),p=await x(d.target.result);if(p&&E(m(p.size)),l){const h=await v(l.data.buffer,{width:l.width,height:l.height,channels:4},{quality:80,colorSpace:3});y(m(new Blob([h.buffer],{type:"image/jpeg"}).size)),n(h)}}},g.readAsDataURL(u[0])}};return s.exports.useEffect(()=>{r&&(console.log(r),e.current&&(e.current.src=URL.createObjectURL(new Blob([r],{type:"image/jpeg"}))))},[r]),a.createElement("div",{className:"App"},a.createElement("header",{className:"App-header"},a.createElement("img",{src:B,className:"App-logo",alt:"logo"}),a.createElement("p",null,"Sample of compressing an image in a browser using mozJPEG"),a.createElement("p",null,a.createElement("input",{ref:c,accept:"image/*",type:"file",onChange:b})),t>0&&a.createElement("p",{style:{fontSize:"0.75rem"}},"\u30AA\u30EA\u30B8\u30CA\u30EB\u30B5\u30A4\u30BA: ",t," KB\u2003 JPEG 80%: ",i," KB\u2003 mozJPEG 80%: ",w," KB"),a.createElement("img",{ref:e,src:"",alt:"",style:{width:"600px"}}),a.createElement("p",null,"Edit ",a.createElement("code",null,"App.tsx")," and save to test HMR updates."),a.createElement("p",null,a.createElement("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer"},"Learn React")," | ",a.createElement("a",{className:"App-link",href:"https://vitejs.dev/guide/features.html",target:"_blank",rel:"noopener noreferrer"},"Vite Docs"))))}A.render(a.createElement(a.StrictMode,null,a.createElement(I,null)),document.getElementById("root"));
